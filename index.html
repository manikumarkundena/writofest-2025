<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WritoFest 2K25 | ScriptInk</title>
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="https://image2url.com/images/1761940071799-b748700f-9401-4a0e-b857-14c8a67bc6a0.png">
</head>

<body>
  
  <div class="mouse-glow"></div>

  <script>
    for(let i=0;i<60;i++){
      const sp=document.createElement('div');
      sp.className='sparkle';
      sp.style.left=Math.random()*100+'vw';
      sp.style.animationDelay=(Math.random()*8)+'s';
      sp.style.background=Math.random()>0.5?'radial-gradient(circle, gold, transparent)':'radial-gradient(circle, silver, transparent)';
      document.body.appendChild(sp);
    }
  </script>

  <header data-aos="fade-down">
    <h1>ScriptInk Presents</h1>
    <img src="https://image2url.com/images/1761939760085-988c4ce8-3ad1-4c16-ac4a-7800b3d4906a.png" alt="ScriptInk Logo">
  </header>

  <div class="event-title" data-aos="zoom-in">âœ¨ WritoFest 2K25 âœ¨</div>
  <div class="subtitle" data-aos="fade-up">Where Words Create Magic âœ</div>

  <div class="highlight-card" data-aos="fade-up">
    <p>Words. Emotions. Expression. The stage is set for <strong>WritoFest 2K25</strong> â€” a celebration of storytelling, poetry, and creativity! ğŸŒŸ  
       Every word paints a picture, every emotion tells a story. Let your imagination take center stage and watch magic unfold as words meet worlds. âœ¨</p>
  </div>

  <div class="highlight-card" data-aos="zoom-in">
    <h3>ğŸ† Prizes Worth â‚¹10,000!</h3>
    <p>ğŸ– Certificates, ğŸ“œ Attendance & ğŸ Recognition for All!</p>
    <p>ğŸ“š Events: Writing â€¢ Pop up Quiz â€¢ Open Mic</p>
    <p>ğŸ—£ Languages: English â€¢ Hindi â€¢ Kannada</p>
  </div>

  <div class="highlight-card" data-aos="fade-up">
    <p>ğŸ“… <strong>Date:</strong> November 15, 2025<br>
     ğŸ“ <strong>Venue:</strong> Media Centre, SIT</p>
  </div>
  <img src="https://image2url.com/images/1761974396960-ac7a902a-2d0d-4be4-92a4-84e85f427a84.png" alt="Free Registration" class="free-registration-image" data-aos="zoom-in">
  <div class="register-now" data-aos="fade-up"> Register Now to Participate!</div>

  <form id="regForm" data-aos="zoom-in">
    <input type="text" name="name" placeholder="Full Name" required>
    <input type="email" name="email" placeholder="Email" required>
    <input type="tel" name="phone" placeholder="Phone Number" pattern="[0-9]{10}" required>
    <input type="text" name="usn" placeholder="USN / College ID" required>
   <input type="text" 
       name="college" 
       placeholder="Enter College Name (Default: SIT, Tumkur)" 
       value="Siddaganga Institute of Technology, Tumkur" 
       onfocus="this.value=''" 
       onblur="if(this.value=='') this.value='Siddaganga Institute of Technology, Tumkur';"
       required>
    <select name="course" required>
        <option value="">Select Course</option>
        <option>B.E. / B.Tech.</option>
        <option>B.Arch.</option>
        <option>MBA / MCA</option>
        <option>Other</option>
    </select>
    
    <select name="branch" required>
      <option value="">Select Branch</option>
      <option>CSE</option>
      <option>CSE (AIML)</option>
      <option>AI & DS</option>
      <option>ECE</option>
      <option>EEE</option>
      <option>ETE</option>
      <option>ME</option>
      <option>CV</option>
      <option>BT</option>
      <option>Chemical</option>
      <option>Other</option>
    </select>
    
    <input type="text" id="otherBranch" name="otherBranch" placeholder="Please specify your branch" style="display: none;">
    
    <select name="year" required>
      <option value="">Select Year</option>
      <option>1st Year</option>
      <option>2nd Year</option>
      <option>3rd Year</option>
      <option>4th Year</option>
      <option>5th Year (B.Arch.)</option>
    </select>
    <div class="event-checkbox-group">
      <label class="form-label">Select Event(s):</label>
      
      <div class="checkbox-container">
        <input type="checkbox" id="eventWriting" name="events[]" value="Writing Competition">
        <label for="eventWriting">Writing Competition</label>

        <input type="checkbox" id="eventQuiz" name="events[]" value="Pop up Quiz">
        <label for="eventQuiz">Pop up Quiz</label>

        <input type="checkbox" id="eventMic" name="events[]" value="Open Mic">
        <label for="eventMic">Open Mic</label>
        
        </div>
    </div>
    
    <textarea name="message" placeholder="Any questions or feedback for the ScriptInk team? (Optional)"></textarea>
    
    <button type="submit">Register & Proceed</button>
  </form>

  <div class="about" data-aos="fade-up">
    <h2>About ScriptInk ğŸ’«</h2>
    <p><strong>ScriptInk</strong> is the official creative and technical club of Siddaganga Institute of Technology â€” where innovation meets imagination!  
       From storytelling and poetry to web, app, and graphic design â€” weâ€™re a collective of creators, developers, and dreamers.  
       Our flagship events <strong>WritoFest</strong> and <strong>Rage</strong> bring together writers, designers, and coders through workshops and challenges.  
       Join us, and let your ideas ink the future! ğŸš€</p>
  </div>

  <footer>
  <p class="follow-text">Follow us for updates!</p>
  
  <div class="social-links">
    <a href="https://scriptink.in" target="_blank" aria-label="Our Website">
      <i class="fas fa-globe"></i>
    </a>
    <a href="https://play.google.com/store/apps/details?id=com.scriptink.official" target="_blank" aria-label="Our Mobile App">
      <i class="fab fa-google-play"></i>
    </a>
    <a href="https://t.me/scriptink" target="_blank" aria-label="Telegram">
      <i class="fab fa-telegram"></i>
    </a>
    <a href="https://instagram.com/scriptink_official" target="_blank" aria-label="Instagram">
      <i class="fab fa-instagram"></i>
    </a>
    <a href="https://linkedin.com/company/scriptink-official" target="_blank" aria-label="LinkedIn">
      <i class="fab fa-linkedin"></i>
    </a>
    <a href="https://www.youtube.com/@ScriptInkOfficial" target="_blank" aria-label="YouTube">
      <i class="fab fa-youtube"></i>
    </a>
    <a href="https://g.page/Scriptink" target="_blank" aria-label="Find us on Maps">
      <i class="fas fa-map-marker-alt"></i>
    </a>
  </div>
  
  <small>Made with â¤ï¸ by ScriptInk Team</small>
  
  <p class="copyright">&copy; 2025 ScriptInk. All Rights Reserved.</p>
</footer>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script>
AOS.init();

document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("regForm");
    
    // Branch variables
    const branchSelect = document.querySelector('select[name="branch"]');
    const otherBranchInput = document.getElementById('otherBranch');
    
    // === Branch 'Other' Logic (Event Listener) ===
    branchSelect.addEventListener('change', function() {
        if (this.value === 'Other') {
            otherBranchInput.style.display = 'block';
            otherBranchInput.setAttribute('required', 'true');
        } else {
            otherBranchInput.style.display = 'none';
            otherBranchInput.removeAttribute('required');
            otherBranchInput.value = '';
        }
    });

    // Main form submission logic
    form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        
        // --- 1. CRITICAL FIX: ENSURE ALL DATA IS CAPTURED SAFELY ---
        // Manually construct the data object using formData.get() to ensure all fields, 
        // especially dropdowns and text inputs, are sent, regardless of whether they were modified.
        const data = {
            name: formData.get('name'),
            email: formData.get('email'),
            phone: formData.get('phone'),
            usn: formData.get('usn'),
            college: formData.get('college'),
            course: formData.get('course'),
            branch: formData.get('branch'),
            year: formData.get('year'),
            message: formData.get('message'),
            // Note: 'events' field is retrieved separately below.
        };
        // ----------------------------------------------------------------------
        
        const submitBtn = form.querySelector("button[type='submit']");
        
        // --- 2. VALIDATION CHECK: ENSURE AT LEAST ONE EVENT IS SELECTED ---
        if (!formData.has('events[]')) {
            alert("âš ï¸ Please select at least one event category to register.");
            return; 
        }
        
        // --- 3. CONSOLIDATE 'OTHER' FIELDS (Branch is the only one remaining) ---
        if (data.branch === 'Other' && formData.get('otherBranch')) {
            data.branch = formData.get('otherBranch');
        }
        
        // --- 4. ATTACH EVENTS AND NAME ---
        // Get the events array and add it to the final data object payload
        data['events[]'] = formData.getAll('events[]');

        // Capture name for redirection
        const userName = data.name; 

        submitBtn.disabled = true;
        submitBtn.textContent = "Submitting...";

        try {
            const response = await fetch("https://writofest-2k25.onrender.com/register", { 
                method: "POST",
                headers: {
                    'Content-Type': 'application/json' 
                },
                body: JSON.stringify(data), 
            });

            if (response.ok) {
                // SUCCESS: Redirect with personalized name
                window.location.href = "thankyou.html?name=" + encodeURIComponent(userName);
                
            } else if (response.status === 409) {
                // DUPLICATE (409 Conflict)
                const errorResult = await response.json();
                alert(`ğŸ”” ${errorResult.message}`);

            } else {
                // General Server Error (400, 500)
                const errorResult = await response.json();
                alert(`âŒ Submission failed: ${errorResult.message || 'Internal server error. Please try again.'}`);
            }

        } catch (error) {
            alert("âš ï¸ A network error occurred. Please check your connection and try again.");
            console.error("Fetch error:", error);
        }

        submitBtn.disabled = false;
        submitBtn.textContent = "Register & Proceed";
    });

    // === MOUSE GLOW LOGIC ===
    const glow = document.querySelector('.mouse-glow');

    document.addEventListener('mousemove', (e) => {
        glow.style.left = e.pageX + 'px';
        glow.style.top = e.pageY + 'px';
    });
});
</script>
</body>
</html>